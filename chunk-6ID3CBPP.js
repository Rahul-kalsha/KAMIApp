import{a as k}from"./chunk-QNKBPRHA.js";import{a as T}from"./chunk-RDOTIU5E.js";import{a as L,b as N}from"./chunk-S6SQHG3H.js";import"./chunk-RAI7CN5A.js";import{$a as D,Aa as h,C as b,D as f,K as P,L as a,Na as I,Oa as M,Pa as w,Ra as F,T as p,Y as m,a as g,b as u,cb as j,da as e,ea as i,fa as c,g as x,ia as S,la as y,ma as C,ra as r,sa as l,ta as O,x as d,y as _,ya as E}from"./chunk-GJLT4NFV.js";var V=o=>["/photos",o],A=o=>({opacity:o}),$=o=>["/posts",o];function z(o,n){o&1&&(e(0,"div",32)(1,"div",33)(2,"span",34),r(3,"Loading..."),i()()())}function q(o,n){if(o&1){let t=S();e(0,"a",26)(1,"div",27)(2,"div",28),p(3,z,4,0,"div",29),e(4,"img",30),y("error",function(v){b(t);let U=C();return f(U.imageUtils.handleImageError(v))})("load",function(){let v=b(t).$implicit;return f(v.loading=!1)}),i()(),e(5,"p",31),r(6),i()()()}if(o&2){let t=n.$implicit;m("routerLink",h(6,V,t.id)),a(3),m("ngIf",t==null?null:t.loading),a(),m("src",t.thumbnailUrl,P)("alt",t.title)("ngStyle",h(8,A,t.loading?"0":"1")),a(2),l(t.title)}}function B(o,n){if(o&1&&(e(0,"a",35)(1,"h6",36),r(2),i(),e(3,"small",37),r(4),i(),e(5,"p",38),r(6),i()()),o&2){let t=n.$implicit;m("routerLink",h(4,$,t.id)),a(2),O("@",t.author,""),a(2),l(t.body),a(2),l(t.title)}}var R=class o{postsService=d(k);albumsService=d(T);photosService=d(L);imageUtils=d(N);statistics={posts:0,albums:0,photos:0};recentPhotos=[];topPosts=[];ngOnInit(){this.loadStatistics(),this.loadRecentPhotos(),this.loadTopPosts()}loadStatistics(){x({posts:this.postsService.getPosts({_limit:1}),albums:this.albumsService.getAlbums({_limit:1}),photos:this.photosService.getPhotos({_limit:1})}).subscribe(n=>{this.statistics={posts:Number(n.posts.headers.get("x-total-count"))||0,albums:Number(n.albums.headers.get("x-total-count"))||0,photos:Number(n.photos.headers.get("x-total-count"))||0}})}loadRecentPhotos(){this.photosService.getPhotos({_limit:20}).subscribe(n=>{n.body&&(this.recentPhotos=n.body.map(t=>u(g({},t),{loading:!0})))})}loadTopPosts(){this.postsService.getPosts({_limit:6}).subscribe(n=>{n.body&&(this.topPosts=n.body.map(t=>u(g({},t),{author:"Bret"})))})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=_({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[E],decls:55,vars:7,consts:[[1,"common-container"],[1,"content-wrapper"],[1,"row","g-3"],[1,"col-12","col-lg-8"],[1,"row","g-3","mb-4"],[1,"col-12","col-sm-4"],[1,"card","h-100"],[1,"card-body","d-flex","align-items-center"],[1,"stats-icon","bg-light","rounded-circle","p-3","me-3"],[1,"bi","bi-chat-square-text-fill","fs-4","text-primary"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"bi","bi-collection-fill","fs-4","text-primary"],[1,"bi","bi-image-fill","fs-4","text-primary"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title","mb-4"],[1,"badge","bg-primary"],["href","javascript:;","class","col-6 col-md-3 text-decoration-none",3,"routerLink",4,"ngFor","ngForOf"],[1,"col-12","col-lg-4"],[1,"col-lg-12"],[1,"card-body","overflow-auto",2,"max-height","95vh"],[1,"card-title"],[1,"top-posts-list"],["href","javascript:;","class","post-item mb-3 text-decoration-none my-2 d-flex flex-column",3,"routerLink",4,"ngFor","ngForOf"],["href","javascript:;",1,"col-6","col-md-3","text-decoration-none",3,"routerLink"],[1,"photo-card"],[1,"position-relative"],["class","position-absolute top-50 start-50 translate-middle",4,"ngIf"],[1,"img-fluid","rounded",3,"error","load","src","alt","ngStyle"],[1,"small","text-muted","mt-2","mb-0","text-truncate"],[1,"position-absolute","top-50","start-50","translate-middle"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["href","javascript:;",1,"post-item","mb-3","text-decoration-none","my-2","d-flex","flex-column",3,"routerLink"],[1,"text-muted","mb-1"],[1,"text-primary","line-clamp-1"],[1,"small","mb-0","line-clamp-2","text-black"]],template:function(t,s){t&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),c(9,"i",9),i(),e(10,"div")(11,"p",10),r(12,"Posts"),i(),e(13,"h3",11),r(14),i()()()()(),e(15,"div",5)(16,"div",6)(17,"div",7)(18,"div",8),c(19,"i",12),i(),e(20,"div")(21,"p",10),r(22,"Albums"),i(),e(23,"h3",11),r(24),i()()()()(),e(25,"div",5)(26,"div",6)(27,"div",7)(28,"div",8),c(29,"i",13),i(),e(30,"div")(31,"p",10),r(32,"Photos"),i(),e(33,"h3",11),r(34),i()()()()()(),e(35,"div",2)(36,"div",14)(37,"div",15)(38,"div",16)(39,"h5",17),r(40,"Recent Photos "),e(41,"span",18),r(42),i()(),e(43,"div",2),p(44,q,7,10,"a",19),i()()()()()(),e(45,"div",20)(46,"div",21)(47,"div",15)(48,"div",22)(49,"h5",23),r(50,"Top Posts "),e(51,"span",18),r(52),i()(),e(53,"div",24),p(54,B,7,6,"a",25),i()()()()()()()()),t&2&&(a(14),l(s.statistics.posts),a(10),l(s.statistics.albums),a(10),l(s.statistics.photos),a(8),l(s.recentPhotos.length),a(2),m("ngForOf",s.recentPhotos),a(8),l(s.topPosts.length),a(2),m("ngForOf",s.topPosts))},dependencies:[F,I,M,w,j,D],styles:[".stats-icon[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center}.photo-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1;object-fit:cover;width:100%}.top-posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]{padding:15px 0;border-bottom:1px solid #eee}.top-posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.top-posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}@media (max-width: 767.98px){.stats-icon[_ngcontent-%COMP%]{width:40px;height:40px}.photo-card[_ngcontent-%COMP%]{margin-bottom:1rem}}@media (max-width: 991.98px){.top-posts-list[_ngcontent-%COMP%]{max-height:50vh}.row[_ngcontent-%COMP%]{margin-right:0;margin-left:0}}"]})};export{R as DashboardComponent};
