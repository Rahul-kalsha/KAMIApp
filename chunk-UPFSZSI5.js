import{a as T}from"./chunk-QNKBPRHA.js";import{a as N}from"./chunk-RDOTIU5E.js";import{a as j,b as U}from"./chunk-AU62RWDH.js";import"./chunk-RAI7CN5A.js";import{Aa as E,C as b,D as u,K as _,L as s,Na as I,Oa as M,Pa as w,Ra as D,T as p,Y as d,a as h,b as g,cb as F,da as t,ea as i,fa as c,g as f,ia as P,la as S,ma as y,ra as n,sa as l,ta as C,x as m,y as x,ya as O}from"./chunk-GJLT4NFV.js";var A=a=>({opacity:a});function $(a,o){a&1&&(t(0,"div",32)(1,"div",33)(2,"span",34),n(3,"Loading..."),i()()())}function z(a,o){if(a&1){let e=P();t(0,"div",26)(1,"div",27)(2,"div",28),p(3,$,4,0,"div",29),t(4,"img",30),S("error",function(v){b(e);let R=y();return u(R.imageUtils.handleImageError(v))})("load",function(){let v=b(e).$implicit;return u(v.loading=!1)}),i()(),t(5,"p",31),n(6),i()()()}if(a&2){let e=o.$implicit;s(3),d("ngIf",e==null?null:e.loading),s(),d("src",e.thumbnailUrl,_)("alt",e.title)("ngStyle",E(5,A,e.loading?"0":"1")),s(2),l(e.title)}}function k(a,o){if(a&1&&(t(0,"div",35)(1,"h6",36),n(2),i(),t(3,"small",37),n(4),i(),t(5,"p",38),n(6),i()()),a&2){let e=o.$implicit;s(2),C("@",e.author,""),s(2),l(e.body),s(2),l(e.title)}}var V=class a{postsService=m(T);albumsService=m(N);photosService=m(j);imageUtils=m(U);statistics={posts:0,albums:0,photos:0};recentPhotos=[];topPosts=[];ngOnInit(){this.loadStatistics(),this.loadRecentPhotos(),this.loadTopPosts()}loadStatistics(){f({posts:this.postsService.getPosts({_limit:1}),albums:this.albumsService.getAlbums({_limit:1}),photos:this.photosService.getPhotos({_limit:1})}).subscribe(o=>{this.statistics={posts:Number(o.posts.headers.get("x-total-count"))||0,albums:Number(o.albums.headers.get("x-total-count"))||0,photos:Number(o.photos.headers.get("x-total-count"))||0}})}loadRecentPhotos(){this.photosService.getPhotos({_limit:20}).subscribe(o=>{o.body&&(this.recentPhotos=o.body.map(e=>g(h({},e),{loading:!0})))})}loadTopPosts(){this.postsService.getPosts({_limit:6}).subscribe(o=>{o.body&&(this.topPosts=o.body.map(e=>g(h({},e),{author:"Bret"})))})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-dashboard"]],standalone:!0,features:[O],decls:55,vars:7,consts:[[1,"common-container"],[1,"content-wrapper"],[1,"row","g-3"],[1,"col-12","col-lg-8"],[1,"row","g-3","mb-4"],[1,"col-12","col-sm-4"],[1,"card","h-100"],[1,"card-body","d-flex","align-items-center"],[1,"stats-icon","bg-light","rounded-circle","p-3","me-3"],[1,"bi","bi-chat-square-text-fill","fs-4","text-primary"],[1,"text-muted","mb-0"],[1,"mb-0"],[1,"bi","bi-collection-fill","fs-4","text-primary"],[1,"bi","bi-image-fill","fs-4","text-primary"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"card-title","mb-4"],[1,"badge","bg-primary"],["class","col-6 col-md-3",4,"ngFor","ngForOf"],[1,"col-12","col-lg-4"],[1,"col-lg-12"],[1,"card-body","overflow-auto",2,"max-height","95vh"],[1,"card-title"],[1,"top-posts-list"],["class","post-item mb-3",4,"ngFor","ngForOf"],[1,"col-6","col-md-3"],[1,"photo-card"],[1,"position-relative"],["class","position-absolute top-50 start-50 translate-middle",4,"ngIf"],[1,"img-fluid","rounded",3,"error","load","src","alt","ngStyle"],[1,"small","text-muted","mt-2","mb-0","text-truncate"],[1,"position-absolute","top-50","start-50","translate-middle"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"post-item","mb-3"],[1,"text-muted","mb-1"],[1,"text-primary","line-clamp-1"],[1,"small","mb-0","line-clamp-2"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),c(9,"i",9),i(),t(10,"div")(11,"p",10),n(12,"Posts"),i(),t(13,"h3",11),n(14),i()()()()(),t(15,"div",5)(16,"div",6)(17,"div",7)(18,"div",8),c(19,"i",12),i(),t(20,"div")(21,"p",10),n(22,"Albums"),i(),t(23,"h3",11),n(24),i()()()()(),t(25,"div",5)(26,"div",6)(27,"div",7)(28,"div",8),c(29,"i",13),i(),t(30,"div")(31,"p",10),n(32,"Photos"),i(),t(33,"h3",11),n(34),i()()()()()(),t(35,"div",2)(36,"div",14)(37,"div",15)(38,"div",16)(39,"h5",17),n(40,"Recent Photos "),t(41,"span",18),n(42),i()(),t(43,"div",2),p(44,z,7,7,"div",19),i()()()()()(),t(45,"div",20)(46,"div",21)(47,"div",15)(48,"div",22)(49,"h5",23),n(50,"Top Posts "),t(51,"span",18),n(52),i()(),t(53,"div",24),p(54,k,7,3,"div",25),i()()()()()()()()),e&2&&(s(14),l(r.statistics.posts),s(10),l(r.statistics.albums),s(10),l(r.statistics.photos),s(8),l(r.recentPhotos.length),s(2),d("ngForOf",r.recentPhotos),s(8),l(r.topPosts.length),s(2),d("ngForOf",r.topPosts))},dependencies:[D,I,M,w,F],styles:[".stats-icon[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center}.photo-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{aspect-ratio:1;object-fit:cover;width:100%}.top-posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]{padding:15px 0;border-bottom:1px solid #eee}.top-posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.top-posts-list[_ngcontent-%COMP%]   .post-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600}@media (max-width: 767.98px){.stats-icon[_ngcontent-%COMP%]{width:40px;height:40px}.photo-card[_ngcontent-%COMP%]{margin-bottom:1rem}}@media (max-width: 991.98px){.top-posts-list[_ngcontent-%COMP%]{max-height:50vh}.row[_ngcontent-%COMP%]{margin-right:0;margin-left:0}}"]})};export{V as DashboardComponent};
